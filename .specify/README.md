# Система спецификаций проекта Omegram

Эта директория содержит конституцию проекта, шаблоны документации и структурированные артефакты разработки.

## Структура

```
.specify/
├── README.md                          # Этот файл
├── CI-CD-INTEGRATION.md               # Руководство по настройке CI/CD
├── memory/
│   └── constitution.md                # Конституция проекта (принципы и стандарты)
├── templates/
│   ├── plan-template.md               # Шаблон плана разработки
│   ├── spec-template.md               # Шаблон технической спецификации
│   ├── tasks-template.md              # Шаблон списка задач
│   ├── agent-file-template.md         # Шаблон для AI-ассистента
│   ├── checklist-template.md          # Шаблон чеклистов
│   └── commands/
│       ├── constitution.md            # Команда создания/обновления конституции
│       ├── plan.md                    # Команда создания плана
│       ├── spec.md                    # Команда создания спецификации
│       └── tasks.md                   # Команда создания задач
├── scripts/
│   └── bash/
│       ├── create-new-feature.sh      # Скрипт создания новой фичи
│       ├── setup-plan.sh              # Скрипт настройки плана
│       └── common.sh                  # Общие функции
└── [Директории с артефактами]
    ├── specs/ (в корне проекта)       # Технические спецификации по номерам
    ├── plans/                         # Планы разработки функций
    └── tasks/                         # Детальные списки задач

Примечание: Директория specs/ находится в корне проекта для совместимости
с существующими bash-скриптами.
```

## Конституция проекта

**Файл:** `memory/constitution.md`  
**Текущая версия:** 1.0.0  
**Дата ратификации:** 2025-10-19

Конституция определяет четыре основных принципа разработки:

### Принцип 1: Качество кода и поддерживаемость
- Следование стандартам Rust (rustfmt, clippy)
- Обязательный code review
- Документирование публичных API
- Модульная архитектура

### Принцип 2: Стандарты тестирования и покрытие
- Минимум 70% покрытия критической логики
- Unit, integration и E2E тесты
- Автоматизация в CI/CD
- Быстрые тесты (< 100ms unit, < 1s integration)

### Принцип 3: Согласованность пользовательского опыта
- Время отклика UI < 100ms
- Индикаторы загрузки для операций > 200ms
- Graceful обработка ошибок
- Поддержка keyboard shortcuts
- Плавные анимации (60 FPS)

### Принцип 4: Требования к производительности
- Холодный старт < 3 секунд
- Time to Interactive < 2 секунд
- Потребление памяти (idle) < 150 MB
- Виртуализация длинных списков
- Lazy loading медиа-контента

## Рабочий процесс

### 1. Создание плана (Plan)

**Когда использовать:** При планировании новой функции или значительного изменения.

**Процесс:**
```bash
# Используйте команду /speckit.plan или создайте вручную
# План описывает:
# - Цели и контекст
# - Архитектурное решение
# - Проверку соответствия конституции
# - Риски и альтернативы
# - Фазы реализации
```

**Результат:** Файл в `plans/[feature-name]-plan.md`

### 2. Создание спецификации (Spec)

**Когда использовать:** После одобрения плана, перед началом разработки.

**Процесс:**
```bash
# Используйте команду /speckit.spec
# Спецификация включает:
# - Функциональные требования (FR)
# - Нефункциональные требования (NFR)
# - Дизайн UI/UX
# - Техническую архитектуру
# - План тестирования
```

**Результат:** Файл в `specs/[feature-name]-spec.md`

### 3. Декомпозиция задач (Tasks)

**Когда использовать:** Перед началом спринта для декомпозиции работы.

**Процесс:**
```bash
# Используйте команду /speckit.tasks
# Список задач содержит:
# - Категоризированные задачи (Architecture, Dev, Testing, Performance, UX, Docs)
# - Оценки времени
# - Acceptance criteria
# - Definition of Done
# - Граф зависимостей
```

**Результат:** Файл в `tasks/[feature-name]-tasks.md`

### 4. Реализация и проверка

Во время разработки:
- ✅ Следуйте принципам конституции
- ✅ Отмечайте выполненные задачи
- ✅ Обновляйте прогресс в task list
- ✅ Создавайте регрессионные тесты для багов

Перед merge:
- ✅ Code review (Принцип 1)
- ✅ Тесты проходят, coverage > 70% (Принцип 2)
- ✅ UI отзывчив, нет jank (Принцип 3)
- ✅ Performance benchmarks пройдены (Принцип 4)

## Команды (для AI ассистентов)

Система поддерживает следующие команды:

### `/speckit.constitution`
Создает или обновляет конституцию проекта.

**Пример:**
```
/speckit.constitution Add principle for security and data privacy
```

### `/speckit.plan`
Создает план разработки для новой функции.

**Пример:**
```
/speckit.plan Add support for sending photos in chats with image compression
```

### `/speckit.spec`
Создает техническую спецификацию на основе плана.

**Пример:**
```
/speckit.spec Create spec for photo sending feature based on photo-upload-plan.md
```

### `/speckit.tasks`
Генерирует детальный список задач из спецификации.

**Пример:**
```
/speckit.tasks Break down photo-upload-spec.md into actionable tasks
```

## Обновление конституции

Изменения в конституцию вносятся через процедуру:

1. **Обоснование:** Четкое объяснение необходимости изменения
2. **Pull Request:** С предлагаемыми изменениями
3. **Обсуждение:** Минимум 3 рабочих дня
4. **Одобрение:** 2/3 голосов мейнтейнеров
5. **Версионирование:** Семантическое версионирование (MAJOR.MINOR.PATCH)

### Правила версионирования

- **MAJOR (X.0.0):** Удаление принципов, несовместимые изменения
- **MINOR (x.Y.0):** Добавление принципов, существенные расширения
- **PATCH (x.y.Z):** Уточнения, исправления, улучшение читаемости

## Контроль соблюдения

- **Code Review:** Проверка соответствия принципам качества
- **CI/CD:** Автоматическая проверка тестов и производительности
- **Ретроспективы:** Ежемесячная оценка соблюдения
- **Performance Benchmarks:** Автоматические тесты в каждом PR
- **UX Аудиты:** Перед каждым релизом

## Исключения

В критических случаях (security hotfixes, production bugs) допускается временное отклонение с:

- Документированием в commit message
- Созданием задачи на устранение техдолга
- Уведомлением команды в течение 24 часов

## Метрики успеха

### Качество кода (Принцип 1)
- Code review coverage: 100%
- Clippy warnings: 0
- Public API documentation: 100%

### Тестирование (Принцип 2)
- Unit test coverage: > 70%
- Integration tests: Все критические пути
- E2E tests: Основные user flows
- CI/CD test execution: < 10 minutes

### UX (Принцип 3)
- UI response time: < 100ms
- Time to Interactive: < 2s
- User error rate: < 5%
- Keyboard accessibility: 100% основных функций

### Производительность (Принцип 4)
- Cold start: < 3s
- Memory (idle): < 150 MB
- Scroll FPS: Постоянно 60
- Bundle size: < 50 MB

---

## Поддержка

При вопросах или предложениях по улучшению системы спецификаций:

1. Создайте issue в репозитории
2. Обсудите на командной встрече
3. Предложите изменение через PR

**Живой документ:** Эта система должна эволюционировать вместе с проектом.

